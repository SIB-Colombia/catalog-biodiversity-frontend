!function(n,e,t){n.fn.photoGallery=function(a){var s=n.extend({auto:!0,speed:500,timeout:4e3,pager:!1,nav:!1,random:!1,pause:!1,pauseControls:!0,prevText:"Previous",nextText:"Next",maxwidth:"",navContainer:"",manualControls:"",namespace:"rslides",before:n.noop,after:n.noop},a);return this.each(function(){t++;var o,i,r,l,c,u,d=n(this),f=0,p=d.children(),h=p.size(),v=parseFloat(s.speed),m=parseFloat(s.timeout),C=parseFloat(s.maxwidth),x=s.namespace,y=x+t,b=x+"_nav "+y+"_nav",g=x+"_here",w=y+"_on",_=y+"_s",I=n("<ul class='"+x+"_tabs "+y+"_tabs' />"),q={"float":"left",position:"relative",opacity:1,zIndex:2},z={"float":"none",position:"absolute",opacity:0,zIndex:1},T=function(){var n=document.body||document.documentElement,e=n.style,t="transition";if("string"==typeof e[t])return!0;o=["Moz","Webkit","Khtml","O","ms"],t=t.charAt(0).toUpperCase()+t.substr(1);var a;for(a=0;a<o.length;a++)if("string"==typeof e[o[a]+t])return!0;return!1}(),k=function(e){s.before(e),T?(p.removeClass(w).css(z).eq(e).addClass(w).css(q),f=e,setTimeout(function(){s.after(e)},v)):p.stop().fadeOut(v,function(){n(this).removeClass(w).css(z).css("opacity",1)}).eq(e).fadeIn(v,function(){n(this).addClass(w).css(q),s.after(e),f=e})};if(s.random&&(p.sort(function(){return Math.round(Math.random())-.5}),d.empty().append(p)),p.each(function(n){this.id=_+n}),p.each(function(n){this.children[0].children[0].children[0].id=_+"image"+n}),d.addClass(x+" "+y),a&&a.maxwidth&&d.css("max-width",C),p.hide().css(z).eq(0).addClass(w).css(q).show(),T&&p.show().css({"-webkit-transition":"opacity "+v+"ms ease-in-out","-moz-transition":"opacity "+v+"ms ease-in-out","-o-transition":"opacity "+v+"ms ease-in-out",transition:"opacity "+v+"ms ease-in-out"}),p.size()>1){if(v+100>m)return;if(s.pager&&!s.manualControls){var F=[];p.each(function(n){var e=n+1;F+="<li><a href='#' class='"+_+e+"'><img src='"+this.children[0].children[0].children[0].src+"'></a></li>"}),I.append(F),a.navContainer?n(s.navContainer).append(I):d.after(I)}if(s.manualControls&&(I=n(s.manualControls),I.addClass(x+"_tabs "+y+"_tabs")),(s.pager||s.manualControls)&&I.find("li").each(function(e){n(this).addClass(_+(e+1))}),(s.pager||s.manualControls)&&(u=I.find("a"),i=function(n){u.closest("li").removeClass(g).eq(n).addClass(g)}),s.auto&&(r=function(){c=setInterval(function(){p.stop(!0,!0);var n=h>f+1?f+1:0;(s.pager||s.manualControls)&&i(n),k(n)},m)})(),l=function(){s.auto&&(clearInterval(c),r())},s.pause&&d.hover(function(){clearInterval(c)},function(){l()}),(s.pager||s.manualControls)&&(u.bind("click",function(e){e.preventDefault(),s.pauseControls||l();var t=u.index(this);f===t||n("."+w).queue("fx").length||(i(t),k(t))}).eq(0).closest("li").addClass(g),s.pauseControls&&u.hover(function(){clearInterval(c)},function(){l()})),s.nav){var M="<a href='#' class='"+b+" prev'>"+s.prevText+"</a><a href='#' class='"+b+" next'>"+s.nextText+"</a>";a.navContainer?n(s.navContainer).append(M):d.after(M);var D=n("."+y+"_nav"),O=D.filter(".prev");D.bind("click",function(e){e.preventDefault();var t=n("."+w);if(!t.queue("fx").length){var a=p.index(t),o=a-1,r=h>a+1?f+1:0;k(n(this)[0]===O[0]?o:r),(s.pager||s.manualControls)&&i(n(this)[0]===O[0]?o:r),s.pauseControls||l()}}),s.pauseControls&&D.hover(function(){clearInterval(c)},function(){l()})}}if("undefined"==typeof document.body.style.maxWidth&&a.maxwidth){var W=function(){d.css("width","100%"),d.width()>C&&d.css("width",C)};W(),n(e).bind("resize",function(){W()})}})}}(jQuery);